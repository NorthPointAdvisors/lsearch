// Generated by CoffeeScript 1.3.1
(function(){var a,b;a=jQuery;b={getNames:function(){console.log("Getting the app names ...");return a.getJSON("/app_names",{ajax:"true"},function(b){var c,d,e,f;console.log("app_name : Got data : %o",b);d="";for(e=0,f=b.length;e<f;e++){c=b[e];d+="<option>"+c+"</option>"}console.log("app_name : Got options : %s",d);return a("#app-name").html(d)})},getDates:function(){console.log("Getting the dates ...");return a.getJSON("/dates",{ajax:"true"},function(b){var c,d,e,f;console.log("date : Got data : %o",b);d="";for(e=0,f=b.length;e<f;e++){c=b[e];d+="<option>"+c+"</option>"}console.log("date : Got options : %s",d);return a("#date-str").html(d)})},compileTemplates:function(){var b,c,d,e,f,g,h;Handlebars.templates==null&&(Handlebars.templates={});d=["summary","results"];for(g=0,h=d.length;g<h;g++){c=d[g];console.log("Name : %s",c);f="#"+c+"-template";console.log("compileTemplate : template : %s : id : %s",c,f);b=a(f).html();console.log("compileTemplate : template : %s : html : %s",c,b);e=Handlebars.compile(b);console.log("compileTemplate : template : %s : object : %s",c,e);Handlebars.templates[c]=e}console.log("compileTemplates : templates : %o",Handlebars.templates);return Handlebars.templates},resultsTpl:Handlebars.templates.results,summaryTpl:Handlebars.templates.summary,reset:function(){this.app_name="";this.date_str="";this.count=0;this.limit=null;this.offset=0;return this.size=null},search:function(c){var d,e,f;c==null&&(c=b.offset);f="/grep/"+a("#app-name").val();d={date:a("#date-str").val(),offset:c};console.log("search : url : %s",f);console.log("search : options : %o",d);e=this;return a.getJSON(f,d,function(b){var c;console.log("search : App (1) : %o",e);e.app_name=b.app_name;e.date_str=b.date_str;e.count=b.count;e.limit=b.limit;e.offset=b.offset;e.size=b.size;console.log("search : App (2) : %o",e);console.log("search : resultsTpl : %o",e.resultsTpl);console.log("search : summaryTpl : %o",e.summaryTpl);console.log("search : data : %o",b);c=e.resultsTpl(b);console.log("search : results : html : %s",c);a("#results").append(c);c=e.summaryTpl(e);console.log("search : summary : html : %s",c);a("#summary").html(c);return e})}};window.App=b;a(function(){b.reset();b.compileTemplates();b.getNames();b.getDates();return a("#search-btn").click(function(a){a.preventDefault();return b.search()})})}).call(this);